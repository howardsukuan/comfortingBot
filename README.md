 # 親愛的樹洞：(Line)安慰機器人

## 1. 作品理念

生命中難免會有低潮，當我們低落時，我們可以選擇將困擾與難過與朋友家人分享，不過有時候我們只想把這些聲音留給自己，話雖如此，我們還是會矛盾地希望有一個可以抒發的空間。

樹洞，在童話故事裡頭，是一個人們可以存放各種秘密的地方。在這次的計畫中，我們希望打造一個如同樹洞般的機器人，他能在我們情緒低落時接住我們，聽著我們述說著自己的故事，他不會給我們建議，而是會好好接受我們的情緒，我們可以放心地跟他說出心裡的困擾，藉由將情緒說出口，心中的低落也得以紓解。

但同時，我們也針對特定情況給予專業的資源的協助，對於家暴、性騷擾、自殺這三個意圖，我們提供了可能的輔導管道，如家暴專線、生命專線等等，讓這些使用者除了能夠抒發自己情緒之餘，也可以有能夠尋求更專業協助的機會，這是一個樹洞，讓人可以放入心中各種傷心事，也同時提供選擇，在一個人面臨危難時知道自己還能有別的面對問題的機會。

另一個目標則是，我們試圖結合語言學、資訊能力以及輔導技巧，透過這個計畫，進一步探索跨領域的結合中可能的議題以及解決方式。

## 2. 安慰策略
Burleson (1985, 1994) 將安慰策略定義為：能夠紓解一個人的負面情緒的任何行為，可以是口頭上以及行為上，而在這樣的定義下，Burleson (2008) 更進一步闡明一個核心概念，個人中心程度 (person centeredness)，其所指的就是該安慰訊息反映出對表達者的負面情緒的認知 (acknowledge)、詳述 (elaboration) 以及脈絡化 (contextualization) 之程度。低個人中心程度所指的是，在安慰訊息表達上，比較趨近於表達者中心，也就是會比較從安慰者角度出發；而高個人中心程度所指的是，在訊息表達上會比較以被安慰者角度出發。而中以及高個人中心程度會是一個比較中立的表達方式，因為這些主要就是以描述情況以及對方情緒為主，在這個聊天機器人裡頭我們所採用的立場也是如此，我們盡量去認可使用者的情緒，描述他們的狀況，達到安慰之效果。

根據Suzuki (2010)，安慰策略分為以下五類：
(1) 舒緩情緒 (soother)：主要以減輕被安慰者的情緒為主，例如：你還好嗎？
(2) 鼓勵 (encouragement)：提供被安慰者一個較好的未來，例如：下一次會更好的！
(3) 同理 (sympathy)：表達對對方感受的理解，例如：我知道你很難過。
(4) 建議 (advice)：提供相對建議，例如：你可以試看看運動。
(5) 提供心理支持(support)：例如：我一直都會在！
本機器人的回應，會奠基於第(1)(2)(3)(5)類，主要是因為我們想採取一個高個人中心的方式，提供心理上的支援(除了緊急類別如:自殺、性侵、家暴)，希望透過這樣的策略，有效減輕使用者的負面情緒。

## 3. 安慰機器人之建構原理
為了讓機器人理解人所說的話，我們從兩個方向分析話語：
(1) 句型及用詞 和 (2)話語背後的用意。

### 3.1 句型及用詞
許多聊天機器人之所以可以運作，是因為他們抓取人們說話時的關鍵字。只是很多時候人們會知道機器人和真人對話不自然是因為感覺雖然他們抓到那個字，但是其實他們並不知道人們的用意。但如果可以先透過句型來分類，就會減少抓取關鍵字帶來的誤差。

### 3.2 話語背後的用意
我們分析人們說話的目的，例如：他可能想要表達壓力、不舒服的情緒。透過不同的安慰策略作為機器人回覆的基礎，讓回應看起來更自然。

先從分類意圖開始，我們將其分成兩大類別，分別是感覺的分享，例如「感覺很不好」，以及產生情緒的原因，例如「我覺得事情好多」。再來，根據這兩種類別，分類句型和裡頭的關鍵字。先分類句型的好處是訓練聊天機器人時能避免重複使用到句型一樣或相似的句子。另外，句型本身其實也帶有語意，所以先確認句型能幫助機器人理解人的意思。

## 4. 執行流程
[![](https://upload.cc/i1/2021/04/24/hO7Xur.png)]

### 4.1 運用技術
我們使用python當作主要的程式撰寫工具。另外，為了讓分類句型更有依據，本機器人採用Droidtown所開發的Loki，作為分類、比對句型的主要工具。

首先，Loki會先幫句子斷詞，並根據句子裡面的字詞位置以及它們的詞性來判斷是否為同一種句型。如果句型重複就不會再出現在這套系統裡面了。再從各個句型中，設立條件或是關鍵句，就可以分類不同的句子。

舉例來說，當我們在資料庫裡建入句型 (1) 時，其會分析該句之語言結構:

(1) 爸爸一直打我
`<ENTITY_pronoun>爸爸</ENTITY_pronoun><TIME_justtime>一直</TIME_justtime><ACTION_verb>揍</ACTION_verb><ENTITY_pronoun>我</ENTITY_pronoun>`

當出現類似句子如 (2)：

(2) `<ENTITY_pronoun>爸爸</ENTITY_pronoun><TIME_justtime>一直</TIME_justtime><ACTION_lightVerb>打</ACTION_lightVerb><ENTITY_pronoun>我</ENTITY_pronoun>`

會由於兩者句型結構類似，系統會自動將第二句與第一句話判斷為同一句型，藉此大幅降低對資料量的需求。

### 4.2 類別分類
在類別上，我們根據句子的主題分類，看看是與哪個類別相關，共有四大類：interpersonal, personal, serious situation 以及 others。以下介紹這四類所包含之主題。

1. **interpersonal**：自己與他人互動時所遭遇之不順心，例如:家人相關、朋友相關、伴侶相關、陌生人...等。
   例：和男友吵到快分手。

2. **personal**：與自己相關之抱怨，例如：外貌、病痛、課業、工作壓力...等。
   例：我眼袋好深好醜。

3. **serious situations**：含括家暴、性騷擾、自殺三類。
   例：我㇐直被我爸揍。(家暴)
   例：男性友人偷摸我屁股還裝作沒這回事。(性騷擾)
   例：活著有什麼意義。(自殺)

4. **others**：其他，例如：天氣、沒中獎、東西壞掉...等。
   例：每次發票都沒中獎，有夠衰。

如下圖所示，我們的分類共有 80 類以上，更詳細的介紹請參考我們的類別文件。以下是我們分類的抱怨類別：
![](https://upload.cc/i1/2021/04/24/0fEcmp.png)

### 4.3 Loki使用方法
1. 要使用 Loki 偵知對話者的語意，需要先在 Droidtown 註冊並啟用平台。網址為：https://api.droidtown.co/

2. 註冊和購買好Articut (斷詞工具) 之後，就可以點選以下icon，按下開始使用Loki就可以進入Loki 的頁面。
![](https://upload.cc/i1/2021/04/24/BnZbvS.png)
3. 輸入專案名稱建立專案。
![](https://upload.cc/i1/2021/04/24/e0qKBx.png)
 
4. 點選剛剛加入的專案。
 ![](https://upload.cc/i1/2021/04/24/DtlJmy.png
)
5. 接著點選建立意圖。以此專案為例，我們建立 complainingSentences, Feeling 兩種意圖。
![](https://upload.cc/i1/2021/04/24/nOFhx4.png
)
6. 再輸入句型。

7. 輸入完句型之後就可以選擇欲使用的程式，這裡我們選擇 python，把輸入好的內容以 python codes 的方式呈現，接下來就可以繼續用 python 來寫分類條件。
 
8. 下載下來會至少有 intent 和 loki 的主要內容 (如圖中兩個藍底的檔案)， 這個資料夾也可以放入其他我們想要的程式內容。
![](https://upload.cc/i1/2021/04/24/nkvH0I.png)

9. 接著我們打開 intent 的資料夾，裡面是我們輸入的句型，可以在每種句型寫我們自訂的分類條件。執行程式後，就會根據這個條件來分類不同句子。
 ![](https://upload.cc/i1/2021/04/24/ce7I9p.png)
 
10. 接下來程式就可以根據所設定的條件，比對我們寫的對照功能，整體專案就完成了。

## 5 未來發展
由於人力有限，因此即使我們已經試圖窮盡可能的抱怨場景，但是在抱怨句型上，我們有時仍會遇到較新的場景以及句型，因此未來如果有機會，我們希望能有更多的資料輸入，以便幫助到更多的人。另外在輔導技術上，因為我們只修習過輔導原理與實務之課程，因此對輔導上的技術可能還不夠完善，希望未來能進一步與心輔相關科系的同學們合作，讓這個機器人的安慰技巧更加完善。

## 6 Line bot 體驗 QR code
親愛的樹洞為應用於 line 的一款安慰機器人，因此如果想要體驗這個產品，請掃描以下QR code。

![](https://upload.cc/i1/2021/04/24/kwoKWg.png)
